import { useState } from 'react';
import { useTranslation } from 'react-i18next';
import { Button } from './ui/button';
import { Input } from './ui/input';
import { toast } from 'sonner';

const SOCIAL_ICONS = [
  {
    name: 'Facebook',
    key: 'social.facebook',
    path: 'M6.37296 18V9.78936H9.26765L9.70104 6.5895H6.37288V4.54653C6.37288 3.6201 6.64305 2.98879 8.0385 2.98879L9.81819 2.98799V0.126072C9.51038 0.0871459 8.45386 0 7.22488 0C4.65886 0 2.90212 1.49118 2.90212 4.22972V6.5895H0V9.78936H2.90212V17.9999H6.37296V18Z',
    viewBox: '0 0 10 18',
    size: 'w-[10px] h-[18px]',
    hasClipPath: false,
  },
  {
    name: 'X (Twitter)',
    key: 'social.twitter',
    path: 'M13.9378 0H16.64L10.7378 6.79111L17.7067 16H12.2311L7.96444 10.4178L3.05778 16H0.355556L6.68444 8.74667L0 0H5.61778L9.49333 5.12L13.9378 0ZM12.9778 14.3644H14.4711L4.8 1.52889H3.16444L12.9778 14.3644Z',
    viewBox: '0 0 18 16',
    size: 'w-[18px] h-[16px]',
    hasClipPath: false,
  },
  {
    name: 'Instagram',
    key: 'social.instagram',
    path: 'M9 0C12.5951 0 14.3928 -0.000195332 15.6875 0.856445C16.2657 1.239 16.761 1.73434 17.1436 2.3125C18.0002 3.60723 18 5.40493 18 9C18 12.5951 18.0002 14.3928 17.1436 15.6875C16.761 16.2657 16.2657 16.761 15.6875 17.1436C14.3928 18.0002 12.5951 18 9 18C5.40493 18 3.60723 18.0002 2.3125 17.1436C1.73434 16.761 1.239 16.2657 0.856445 15.6875C-0.000195332 14.3928 0 12.5951 0 9C0 5.40493 -0.000195531 3.60723 0.856445 2.3125C1.239 1.73434 1.73434 1.239 2.3125 0.856445C3.60723 -0.000195531 5.40493 0 9 0ZM9 4.34082C6.42675 4.34082 4.34094 6.42678 4.34082 9C4.34082 11.5733 6.42668 13.6592 9 13.6592C11.5732 13.6591 13.6592 11.5733 13.6592 9C13.6591 6.42684 11.5732 4.34091 9 4.34082ZM9 5.91699C10.7025 5.91708 12.0829 7.29746 12.083 9C12.083 10.7026 10.7026 12.0829 9 12.083C7.2973 12.083 5.91699 10.7027 5.91699 9C5.91711 7.29741 7.29738 5.91699 9 5.91699ZM13.8438 3.01172C13.2392 3.01172 12.7482 3.50192 12.748 4.10645C12.748 4.7111 13.2391 5.20117 13.8438 5.20117C14.4482 5.20092 14.9385 4.71094 14.9385 4.10645C14.9383 3.50208 14.4481 3.01198 13.8438 3.01172Z',
    viewBox: '0 0 18 18',
    size: 'w-[18px] h-[18px]',
    hasClipPath: false,
  },
  {
    name: 'Threads',
    key: 'social.threads',
    path: 'M5.97349 6.76757C5.6706 6.56606 4.66409 5.86575 4.66409 5.86575C5.5128 4.6491 6.63238 4.17544 8.17988 4.17544C9.2743 4.17544 10.2036 4.5444 10.867 5.24268C11.5308 5.94122 11.9094 6.9401 11.9955 8.21749C12.3635 8.37173 12.7032 8.55341 13.0117 8.76127C14.2558 9.59981 14.9408 10.8536 14.9408 12.291C14.9408 15.3461 12.442 18 7.91866 18C4.03492 18 0 15.7357 0 8.99327C0 2.28923 3.90838 0 7.90773 0C9.75456 0 14.0865 0.273416 15.7156 5.66501L14.1879 6.06217C12.9283 2.22087 10.2874 1.6095 7.86606 1.6095C3.8634 1.6095 1.59933 4.0522 1.59933 9.24915C1.59933 13.9089 4.12996 16.3844 7.91917 16.3844C11.0365 16.3844 13.3608 14.7607 13.3608 12.3838C13.3608 10.7662 12.0047 9.99164 11.9353 9.99164C11.6705 11.3796 10.9605 13.7143 7.84395 13.7143C6.02812 13.7143 4.46258 12.4572 4.46258 10.8101C4.46258 8.45812 6.68879 7.60687 8.44694 7.60687C9.10532 7.60687 9.89991 7.65134 10.3136 7.7357C10.3136 7.01887 9.70857 5.79206 8.18013 5.79206C6.77874 5.7918 6.42325 6.24741 5.97349 6.76757ZM8.66191 9.21332C6.37167 9.21332 6.07538 10.1919 6.07538 10.8066C6.07538 11.794 7.24604 12.1213 7.87063 12.1213C9.01563 12.1213 10.1919 11.8032 10.3769 9.3945C9.79624 9.26389 9.3635 9.21332 8.66191 9.21332Z',
    viewBox: '0 0 16 18',
    size: 'w-[16px] h-[18px]',
    hasClipPath: false,
  },
  {
    name: 'Steam',
    key: 'social.steam',
    path: 'M7.99094 0C3.76897 0 0.326161 3.23616 0 7.35819L4.29445 9.12994C4.65685 8.87684 5.09173 8.7322 5.56285 8.7322C5.59909 8.7322 5.65345 8.7322 5.68969 8.7322L7.61042 5.98418C7.61042 5.9661 7.61042 5.9661 7.61042 5.94802C7.61042 4.28475 8.96942 2.92881 10.6365 2.92881C12.3035 2.92881 13.6625 4.28475 13.6625 5.94802C13.6625 7.6113 12.3035 8.96723 10.6365 8.96723C10.6183 8.96723 10.5821 8.96723 10.564 8.96723L7.84598 10.9017C7.84598 10.9379 7.84598 10.974 7.84598 11.0102C7.84598 12.2576 6.83126 13.2701 5.58097 13.2701C4.47565 13.2701 3.56965 12.4927 3.35221 11.4441L0.271801 10.1785C1.21404 13.5412 4.31257 16 7.99094 16C12.4122 16 16 12.4203 16 8.00904C16 3.57966 12.4122 0 7.99094 0Z',
    viewBox: '0 0 16 16',
    size: 'w-[16px] h-[16px]',
    hasClipPath: true,
  },
  {
    name: 'Bluesky',
    key: 'social.bluesky',
    path: 'M1.15954 0.00801849C0.345017 0.12063 -0.0496715 0.818168 0.00499443 2.04815C0.0465406 2.96873 0.214912 4.98481 0.345017 6.12951C0.418269 6.77785 0.470748 7.08398 0.546187 7.32014C0.835917 8.21994 1.40226 8.89342 2.2299 9.3231C2.76562 9.60189 3.38663 9.7648 4.09947 9.81509C4.50182 9.84242 5.27261 9.80416 5.54812 9.74184C5.56343 9.73856 5.57217 9.73856 5.56889 9.74293C5.56452 9.74621 5.4541 9.77136 5.3218 9.7976C3.83489 10.0961 2.79952 10.6449 2.29987 11.3982C1.7379 12.2466 1.9347 13.2798 2.85965 14.3239C2.99085 14.4726 3.33524 14.8127 3.50361 14.9592C4.17054 15.5419 4.76312 15.8633 5.37756 15.9759C5.5022 15.9989 5.8138 16.0076 5.94718 15.9923C6.67752 15.906 7.33132 15.4315 7.90422 14.5699C8.30438 13.9697 8.61597 13.294 8.96474 12.274C9.05658 12.0039 9.06752 11.9788 9.09048 11.9788C9.11453 11.9788 9.1189 11.9897 9.24901 12.3669C9.57919 13.3246 9.8875 13.985 10.2767 14.5699C10.76 15.2959 11.311 15.7562 11.9036 15.9267C12.1069 15.9858 12.19 15.9956 12.4579 15.9956C12.7192 15.9956 12.7946 15.9869 13.0133 15.93C13.5381 15.7934 14.0946 15.4697 14.6773 14.9592C14.8468 14.8116 15.1912 14.4715 15.3213 14.3239C15.6919 13.9052 15.9434 13.4963 16.079 13.0896C16.2703 12.5189 16.2222 11.9711 15.939 11.489C15.47 10.6941 14.4051 10.1081 12.8602 9.7976C12.7269 9.77136 12.6164 9.74621 12.6121 9.74293C12.6088 9.73856 12.6175 9.73856 12.6328 9.74184C12.9094 9.80416 13.678 9.84242 14.0815 9.81509C15.775 9.69701 16.9908 8.91857 17.5298 7.60658C17.684 7.23158 17.7321 7.00417 17.825 6.21698C17.954 5.13131 18.1366 2.95342 18.1749 2.04924C18.2262 0.856434 17.8665 0.173109 17.1078 0.0211382C16.9733 -0.00619507 16.642 -0.00510216 16.4758 0.0211382C15.7903 0.13375 14.9846 0.517505 14.2072 1.10462C13.5939 1.56709 12.8515 2.28103 12.1518 3.07915C10.9983 4.3966 9.77599 6.15247 9.18122 7.34528C9.13421 7.4404 9.09375 7.51803 9.09048 7.51803C9.0872 7.51803 9.05112 7.44805 9.00848 7.36277C8.6608 6.65868 7.97857 5.58285 7.28759 4.64806C6.58568 3.69688 5.91438 2.90969 5.18733 2.18154C4.35094 1.34405 3.66543 0.818168 2.92634 0.445346C2.47699 0.219028 2.12275 0.0943909 1.7379 0.0276976C1.58812 0.00145817 1.2798 -0.00838089 1.15954 0.00801849Z',
    viewBox: '0 0 19 16',
    size: 'w-[19px] h-[16px]',
    hasClipPath: false,
  },
] as const;

export const Contact: React.FC = () => {
  const { t } = useTranslation();
  const [email, setEmail] = useState<string>('');
  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);

  const validateEmail = (email: string): boolean => {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  };

  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>): Promise<void> => {
    e.preventDefault();
    
    if (!validateEmail(email)) {
      toast.error(t('contact.form.error'));
      return;
    }

    setIsSubmitting(true);
    
    // Simulate API call
    setTimeout(() => {
      toast.success(t('contact.form.success'));
      setEmail('');
      setIsSubmitting(false);
    }, 1000);
  };

  return (
    <section id="contact" className="bg-background">
      <div className="section-container">
        <div className="max-w-2xl mx-auto text-center">
          <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold mb-6 gradient-text">
            {t('contact.title')}
          </h2>
          <p className="text-lg text-muted-foreground mb-12">
            {t('contact.description')}
          </p>

          {/* Newsletter Form */}
          <form onSubmit={handleSubmit} className="flex flex-col sm:flex-row gap-4 mb-12">
            <Input
              type="email"
              placeholder={t('contact.form.placeholder')}
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="flex-1 h-12"
              required
              aria-label={t('contact.form.placeholder')}
            />
            <Button 
              type="submit" 
              size="lg"
              disabled={isSubmitting}
              className="px-8 hover-lift"
              aria-label={t('contact.form.button')}
            >
              {t('contact.form.button')}
            </Button>
          </form>

          {/* Social Links */}
          <div className="flex flex-wrap justify-center gap-6 sm:gap-8">
            {SOCIAL_ICONS.map((social) => (
              <a
                key={social.name}
                href={t(social.key)}
                target="_blank"
                rel="noopener noreferrer"
                className="text-muted-foreground hover:text-primary transition-colors p-2"
                aria-label={social.name}
              >
                <svg 
                  className={social.size} 
                  viewBox={social.viewBox} 
                  fill="none" 
                  xmlns="http://www.w3.org/2000/svg"
                  role="img"
                  aria-hidden="true"
                >
                  {social.hasClipPath && (
                    <defs>
                      <clipPath id="clip0_steam">
                        <rect width="16" height="16" fill="white"/>
                      </clipPath>
                    </defs>
                  )}
                  <path d={social.path} fill="currentColor"/>
                </svg>
              </a>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};
